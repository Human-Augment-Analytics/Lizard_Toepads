# H6 Bilateral Detection Configuration
# Best hyperparameters from Ray Tune Bayesian search (50 trials, 4xH200)
# Based on H5 with tuned augmentation and training parameters

preprocessing:
  image-dir: /storage/ice-shared/cs8903onl/miami_fall_24_jpgs
  tps-dir: /storage/ice-shared/cs8903onl/tps_files
  bottom-view-processed-dir: data/detect/processed_bottom
  addtional-upper-side-data-dir: /storage/ice-shared/cs8903onl/miami_fall_24_upper_dataset_roboflow/train
  merged-processed-dir: data/detect/processed_merged
  target-size: 1280
  point-size: 10
  add-points: true
  num-workers: 4

split:
  images-dir: data/detect/processed_merged/images
  labels-dir: data/detect/processed_merged/labels
  output-dir: data/detect/dataset
  train-ratio: 0.8
  seed: 42
  copy: false
  exts: .jpg,.jpeg,.png

train:
  # Task and model
  task: detect
  data: null # Use dataset section below instead
  model: yolo11m.pt

  # Training parameters
  epochs: 300
  batch: 8         # tuned (was 32)
  imgsz: 1280
  workers: 2
  patience: 100
  name: H6
  device: 0
  amp: true
  cache: false
  save_period: 10

  # ========================================
  # Tuned Training Parameters
  # ========================================
  lr0: 0.00020512243800954098
  lrf: 0.3844383780337243
  momentum: 0.9481289811379563
  weight_decay: 3.887628761969104e-05
  warmup_epochs: 3.0576753172725946

  # Loss weights (tuned)
  box: 9.553580631345802
  cls: 0.8553963999739769
  dfl: 1.6268280626964176

  # ========================================
  # Tuned Augmentation Parameters
  # ========================================

  # Geometric augmentations
  degrees: 4.652517071401157
  translate: 0.1210777400278381
  scale: 0.24088612975386736
  shear: 0.0
  perspective: 0.0

  # Color augmentations
  hsv_h: 0.03207977739965227
  hsv_s: 0.20925556783546193
  hsv_v: 0.45625097748314736

  # Mosaic & advanced augmentations
  mosaic: 0.32143111078396946
  fliplr: 0.45012266182668975
  mixup: 0.31214368266935344
  copy_paste: 0.0

  # Training strategies
  cos_lr: true
  close_mosaic: 10

dataset:
  # Dataset paths
  path: data/detect/dataset
  train: images/train
  val: images/val
  # Optional test split
  # test: images/test

  # Class configuration
  nc: 6
  names: ["up_finger", "up_toe", "bot_finger", "bot_toe", "ruler", "id"]

inference:
  conf: 0.2 # Confidence threshold (0-1)
  iou: 0.2 # IoU threshold for NMS (0-1)
  imgsz: 1280 # Image size for inference
  save: true # Save results
  save_txt: false # Save results as txt files
  project: results # Results save directory
